<%- include("partials/header", { tituloPagina: tituloPagina }) %>

<section class="kst-section">

  <!-- HEADER -->
  <div class="kst-sim-header">
    <h2 class="kst-sim-title">Editar Simulado</h2>
    <p class="kst-sim-subtitle">
      Ajuste os acertos, dificuldades e informações deste simulado.
    </p>
  </div>

  <!-- CARD -->
  <div class="kst-sim-card">

    <form action="/simulados/<%= simulado.id %>/atualizar" method="POST" class="kst-form">

      <!-- GRID SUPERIOR -->
      <div class="kst-form-row">

        <!-- DATA -->
        <div class="kst-form-group">
          <label class="kst-label">Data do simulado *</label>
          <input
            type="date"
            name="data"
            class="kst-input"
            required
            value="<%= simulado.dia ? simulado.dia.data : '' %>"
          />
        </div>

        <!-- TEMPO -->
        <div class="kst-form-group">
          <label class="kst-label">Tempo total (minutos)</label>
          <input
            type="number"
            name="tempo_total_minutos"
            class="kst-input"
            min="0"
            value="<%= simulado.tempo_total_minutos || '' %>"
          />
        </div>
      </div>

      <!-- DIFICULDADES -->
      <fieldset class="kst-sim-fieldset">
        <legend>Dificuldades e resumo</legend>

        <div class="kst-form-group">
          <label class="kst-label">Área que mais errou</label>
          <input
            type="text"
            name="area_que_mais_errou"
            class="kst-input"
            value="<%= simulado.area_que_mais_errou || '' %>"
          />
        </div>

        <div class="kst-form-group">
          <label class="kst-label">Principal dificuldade</label>
          <select name="principal_dificuldade" class="kst-input">
            <option value="" <%= !simulado.principal_dificuldade ? "selected" : "" %>>Não informar</option>
            <option value="Tempo" <%= simulado.principal_dificuldade === "Tempo" ? "selected" : "" %>>Tempo</option>
            <option value="Cansaço" <%= simulado.principal_dificuldade === "Cansaço" ? "selected" : "" %>>Cansaço</option>
            <option value="Ansiedade" <%= simulado.principal_dificuldade === "Ansiedade" ? "selected" : "" %>>Ansiedade</option>
            <option value="Falta de conteúdo" <%= simulado.principal_dificuldade === "Falta de conteúdo" ? "selected" : "" %>>Falta de conteúdo</option>
            <option value="Prova muito difícil" <%= simulado.principal_dificuldade === "Prova muito difícil" ? "selected" : "" %>>Prova muito difícil</option>
            <option value="Outro" <%= simulado.principal_dificuldade === "Outro" ? "selected" : "" %>>Outro</option>
          </select>
        </div>

      </fieldset>

      <!-- ACERTOS POR ÁREA -->
      <fieldset class="kst-sim-fieldset">
        <legend>Acertos por área (0–45)</legend>

        <div class="kst-sim-grid-areas">

          <div class="kst-sim-area-card">
            <h4>Linguagens</h4>
            <input
              type="number"
              name="acertos_linguagens"
              class="kst-input"
              min="0"
              max="45"
              value="<%= simulado.acertos_linguagens != null ? simulado.acertos_linguagens : '' %>"
            />
          </div>

          <div class="kst-sim-area-card">
            <h4>Humanas</h4>
            <input
              type="number"
              name="acertos_humanas"
              class="kst-input"
              min="0"
              max="45"
              value="<%= simulado.acertos_humanas != null ? simulado.acertos_humanas : '' %>"
            />
          </div>

          <div class="kst-sim-area-card">
            <h4>Naturezas</h4>
            <input
              type="number"
              name="acertos_naturezas"
              class="kst-input"
              min="0"
              max="45"
              value="<%= simulado.acertos_naturezas != null ? simulado.acertos_naturezas : '' %>"
            />
          </div>

          <div class="kst-sim-area-card">
            <h4>Matemática</h4>
            <input
              type="number"
              name="acertos_matematica"
              class="kst-input"
              min="0"
              max="45"
              value="<%= simulado.acertos_matematica != null ? simulado.acertos_matematica : '' %>"
            />
          </div>

        </div>
      </fieldset>

      <!-- RESUMO -->
      <div class="kst-form-group">
        <label class="kst-label">Resumo do simulado</label>
        <textarea
          name="resultado_resumo"
          class="kst-textarea"
          rows="3"
        ><%= simulado.resultado_resumo || '' %></textarea>
      </div>

      <!-- AÇÕES -->
      <div class="kst-form-actions" style="margin-top:1.3rem;">
        <button type="submit" class="kst-btn kst-btn-primary">Salvar alterações</button>
        <a href="/simulados" class="kst-btn kst-btn-secondary">Cancelar</a>
      </div>

    </form>

  </div>

</section>

<%- include("partials/footer") %>
