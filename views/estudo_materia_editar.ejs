<%- include("partials/header", { tituloPagina: tituloPagina }) %>

<section class="kst-section">
  <h2>Editar estudo por matéria</h2>

  <form action="/estudos/<%= estudo.id %>/atualizar" method="post" class="kst-form">
    <div class="kst-form-grid">
      <div class="kst-form-group">
        <label>Data *</label>
        <input type="date" name="data" class="kst-input" required value="<%= estudo.dia ? estudo.dia.data : '' %>" />
      </div>

      <div class="kst-form-group">
        <label>Matéria *</label>
        <select name="materia_id" class="kst-input" required>
          <option value="">Selecione...</option>
          <% materias.forEach(function(m) { %>
            <option value="<%= m.id %>" <%= estudo.materia && estudo.materia.id === m.id ? "selected" : "" %> >
              <%= m.nome %>
            </option>
          <% }) %>
        </select>
      </div>

      <div class="kst-form-group">
        <label>Minutos estudados</label>
        <input type="number" name="minutos_estudados" class="kst-input" value="<%= estudo.minutos_estudados || '' %>" />
      </div>

      <div class="kst-form-group">
        <label>Tipo de estudo</label>
        <select name="tipo_estudo" class="kst-input">
          <option value="" <%= !estudo.tipo_estudo ? "selected" : "" %> >Não informar</option>
          <option value="CONTEUDO_NOVO" <%= estudo.tipo_estudo === "CONTEUDO_NOVO" ? "selected" : "" %> >Conteúdo novo</option>
          <option value="REVISAO" <%= estudo.tipo_estudo === "REVISAO" ? "selected" : "" %> >Revisão</option>
          <option value="REVISAO_ERRO" <%= estudo.tipo_estudo === "REVISAO_ERRO" ? "selected" : "" %> >Revisão de erro</option>
        </select>
      </div>

      <div class="kst-form-group">
        <label>Questões feitas</label>
        <input type="number" name="questoes_feitas" class="kst-input" value="<%= estudo.questoes_feitas || '' %>" />
      </div>

      <div class="kst-form-group">
        <label>Questões certas</label>
        <input type="number" name="questoes_certas" class="kst-input" value="<%= estudo.questoes_certas || '' %>" />
      </div>

      <div class="kst-form-group">
        <label>Questões marcadas para revisão</label>
        <input type="number" name="questoes_marcadas_revisao" class="kst-input" value="<%= estudo.questoes_marcadas_revisao || '' %>" />
      </div>
    </div>

    <div class="kst-form-group">
      <label>Tópicos estudados</label>
      <textarea name="topicos_estudados" class="kst-input" rows="3"><%= estudo.topicos_estudados || '' %></textarea>
    </div>

    <div style="margin-top:1rem;">
      <button type="submit" class="kst-btn kst-btn-primary">Salvar alterações</button>
      <a href="/estudos" class="kst-btn kst-btn-secondary">Cancelar</a>
    </div>
  </form>
</section>

<%- include("partials/footer") %>
