<%- include("../partials/header", { tituloPagina: tituloPagina }) %>

<link rel="stylesheet" href="/css/pages/tab/novo.css" />

<main class="kst-main">
  <div class="kst-container">

    <!-- CABE√áALHO -->
    <div class="kst-page-header">
      <div>
        <h1 class="kst-page-title">Novo Bloco TAB</h1>
        <p class="kst-page-subtitle">
          Registre um bloco de quest√µes e anote seus erros com a t√©cnica TAB.
        </p>
      </div>

      
    </div>

    <!-- FORMUL√ÅRIO -->
    <form action="/tab/novo" method="POST" class="kst-form-card">

      <!-- LINHA 1 -->
      <div class="kst-form-row">
        <div class="kst-form-group">
          <label class="kst-form-label">Ano da prova ENEM *</label>
          <input 
            type="number" 
            name="anoProva"
            min="2010"
            max="2100"
            required
            class="kst-input"
            placeholder="Ex: 2024"
          />
        </div>

        <div class="kst-form-group">
          <label class="kst-form-label">√Årea *</label>
          <select name="area" id="tabArea" class="kst-select" required>
            <option value="">Selecione...</option>
            <option value="LINGUAGENS">Linguagens</option>
            <option value="HUMANAS">Ci√™ncias Humanas</option>
            <option value="NATUREZA">Ci√™ncias da Natureza</option>
            <option value="MATEMATICA">Matem√°tica</option>
          </select>
        </div>
      </div>

      <!-- LINHA 2 -->
      <div class="kst-form-row">
        <div class="kst-form-group">
          <label class="kst-form-label">Bloco das quest√µes *</label>
          <select name="blocoPosicao" id="tabBlocos" class="kst-select" required>
            <option value="">Selecione a √°rea primeiro...</option>
          </select>
        </div>

        <div class="kst-form-group">
          <label class="kst-form-label">Etiqueta da prova (opcional)</label>
          <input 
            type="text" 
            name="provaEtiqueta"
            class="kst-input"
            placeholder="Ex: ENEM 2023 - Azul"
          />
        </div>
      </div>

      <!-- TEXTAREA DE ERROS -->
      <div class="kst-form-group kst-mt-md">
        <label class="kst-form-label">
          Erros do bloco (1 por linha)
        </label>

        <textarea 
          name="errosTexto" 
          rows="10" 
          class="kst-textarea"
          placeholder="138 - LACUNA - An√°lise combinat√≥ria
139 - DESCONHECIMENTO - Fun√ß√£o afim
140 - BANALIDADE - N√£o li que era negativo"></textarea>

        <small class="kst-hint">
          Siga: <strong>Quest√£o - Tipo - Descri√ß√£o</strong>  
          Tipos: DESCONHECIMENTO ¬∑ LACUNA ¬∑ BANALIDADE
        </small>
      </div>

      <!-- BOT√ïES -->
      <div class="kst-form-actions">
        <button class="kst-btn kst-btn-primary kst-btn-lg" type="submit">
          Salvar bloco TAB
        </button>
      </div>
    </form>

    <!-- GUIA DEDICADO TAB -->
    <section class="kst-guide kst-mt-xl">
      <h2>Como usar este formul√°rio ‚Äî T√©cnica TAB</h2>
      <p class="kst-page-subtitle">
        Guia r√°pido para elevar seus acertos e consci√™ncia em cada bloco resolvido.
      </p>

      <h3>üìå Passo a passo:</h3>

      <ol class="kst-list kst-mt-sm">
        <li><strong>Baixe uma prova oficial do ENEM</strong> (2010+).</li>
        <li><strong>Escolha a √°rea</strong> (LINGUAGENS ¬∑ HUMANAS ¬∑ NATUREZA ¬∑ MATEM√ÅTICA).</li>
        <li>O sistema libera os <strong>blocos correspondentes</strong> automaticamente.</li>
        <li><strong>Resolva as 15 quest√µes</strong> daquele bloco.</li>
        <li><strong>Corrija sem emo√ß√£o</strong>: procure o erro, n√£o o acerto.</li>

        <li>
          Classifique cada erro em:
          <ul>
            <li><strong>DESCONHECIMENTO</strong> ‚Äì Voc√™ n√£o sabia o conte√∫do.</li>
            <li><strong>LACUNA</strong> ‚Äì Voc√™ sabia, mas faltava uma parte.</li>
            <li><strong>BANALIDADE</strong> ‚Äì Desaten√ß√£o, leitura, pressa.</li>
          </ul>
        </li>

        <li>
          Registre assim:
          <pre class="kst-code">138 - LACUNA - Errei o princ√≠pio multiplicativo</pre>
        </li>

        <li><strong>Salve o bloco</strong> e acompanhe tudo no painel TAB.</li>
      </ol>

      <p class="kst-mt-md">
        A TAB n√£o te faz ‚Äúacertar mais‚Äù.  
        Ela te faz <strong>errar menos</strong>.  
        E quem erra pouco fecha a prova.
      </p>
    </section>

  </div>
</main>

<%- include("../partials/footer") %>

<script>
/* DISTRIBUI√á√ÉO DE BLOCOS POR √ÅREA */
const blocosPorArea = {
  "LINGUAGENS": [
    { value: "1-15", label: "1‚Äì15 (In√≠cio da prova)" },
    { value: "16-30", label: "16‚Äì30 (Meio da prova)" },
    { value: "31-45", label: "31‚Äì45 (Final da prova)" }
  ],
  "HUMANAS": [
    { value: "46-60", label: "46‚Äì60 (In√≠cio da √°rea)" },
    { value: "61-75", label: "61‚Äì75 (Meio da √°rea)" },
    { value: "76-90", label: "76‚Äì90 (Final da √°rea)" }
  ],
  "NATUREZA": [
    { value: "91-105", label: "91‚Äì105 (In√≠cio da √°rea)" },
    { value: "106-120", label: "106‚Äì120 (Meio da √°rea)" },
    { value: "121-135", label: "121‚Äì135 (Final da √°rea)" }
  ],
  "MATEMATICA": [
    { value: "136-150", label: "136‚Äì150 (In√≠cio da √°rea)" },
    { value: "151-165", label: "151‚Äì165 (Meio da √°rea)" },
    { value: "166-180", label: "166‚Äì180 (Final da √°rea)" }
  ]
};

document.getElementById("tabArea").addEventListener("change", function() {
  const area = this.value;
  const selectBlocos = document.getElementById("tabBlocos");

  selectBlocos.innerHTML = "";

  if (!blocosPorArea[area]) {
    selectBlocos.innerHTML = `<option value="">Selecione a √°rea primeiro...</option>`;
    return;
  }

  blocosPorArea[area].forEach(bloco => {
    const opt = document.createElement("option");
    opt.value = bloco.value;
    opt.textContent = bloco.label;
    selectBlocos.appendChild(opt);
  });
});
</script>
