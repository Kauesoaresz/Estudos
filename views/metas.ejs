<%- include("partials/header", { tituloPagina }) %>

<!-- CSS especÃ­fico da pÃ¡gina de metas -->
<link rel="stylesheet" href="/css/pages/metas.css" />

<section class="kst-metas-wrapper">

  <!-- CabeÃ§alho do painel -->
  <header class="kst-metas-header">
    <div>
      <h1 class="kst-metas-title">Painel de metas <span class="ano">(<%= ano %>)</span></h1>
      <p class="kst-metas-subtitle">
        Acompanhe se o seu ritmo atual te leva para as metas de <strong>Medicina</strong> em <%= ano %>.
      </p>
    </div>

    <!-- Seletor simples de ano (por enquanto, sÃ³ muda a URL) -->
    <form class="kst-metas-year-form" method="get" action="/metas">
      <label for="ano" class="kst-metas-year-label">Ano:</label>
      <input
        type="number"
        id="ano"
        name="ano"
        min="2025"
        max="2035"
        value="<%= ano %>"
        class="kst-metas-year-input"
      />
      <button type="submit" class="kst-btn kst-btn-secondary kst-metas-year-btn">
        Ir
      </button>
    </form>
  </header>

  <!-- GRID PRINCIPAL DE CARDS -->
  <div class="kst-metas-grid">

    <!-- BLOCO 1: TEMPO DE ESTUDO -->
    <section class="kst-metas-card">
      <h2 class="kst-metas-card-title">Tempo de estudo</h2>
      <p class="kst-metas-card-desc">
        Meta de <strong><%= progressoTempo.metaHorasAno %>h</strong> no ano e constÃ¢ncia de
        <strong><%= progressoTempo.metaDiasEstudadosAno %> dias</strong> estudando.
      </p>

      <div class="kst-metas-progress-block">
        <div class="kst-metas-progress-header">
          <span>Total de horas no ano</span>
          <span><%= progressoTempo.totalHorasAno.toFixed(1) %>h / <%= progressoTempo.metaHorasAno %>h</span>
        </div>
        <div class="kst-metas-progress-bar">
          <div
            class="kst-metas-progress-fill"
            style="width:<%= progressoTempo.percHorasAno %>%"
          ></div>
        </div>
        <div class="kst-metas-progress-footer">
          <span><%= progressoTempo.percHorasAno %>% da meta anual</span>
        </div>
      </div>

      <div class="kst-metas-stats-row">
        <div class="kst-metas-stat">
          <span class="label">Dias estudados</span>
          <span class="value">
            <%= progressoTempo.diasEstudadosAno %> / <%= progressoTempo.metaDiasEstudadosAno %>
          </span>
          <span class="hint">
            <%= progressoTempo.percDiasEstudadosAno %>% da constÃ¢ncia alvo
          </span>
        </div>
        <div class="kst-metas-stat">
          <span class="label">MÃ©dia por dia estudado</span>
          <span class="value"><%= progressoTempo.mediaHorasPorDiaEstudado %>h</span>
          <span class="hint">somente dias em que vocÃª realmente estudou</span>
        </div>
        <div class="kst-metas-stat">
          <span class="label">MÃ©dia por dia no ano</span>
          <span class="value"><%= progressoTempo.mediaHorasDiaNoAno %>h</span>
          <span class="hint">distribuindo as horas em todos os dias</span>
        </div>
      </div>

      <div class="kst-metas-week-goal">
        <div>
          <span class="label">Meta semanal mÃ­nima</span>
          <span class="value"><%= METAS_CONFIG.horasSemanaisMin %>h/semana</span>
        </div>
        <div>
          <span class="label">Meta semanal ideal</span>
          <span class="value"><%= METAS_CONFIG.horasSemanaisIdeal %>h/semana</span>
        </div>
      </div>
    </section>

    <!-- BLOCO 2: QUESTÃ•ES & CONSTÃ‚NCIA -->
    <section class="kst-metas-card">
      <h2 class="kst-metas-card-title">QuestÃµes & constÃ¢ncia</h2>
      <p class="kst-metas-card-desc">
        Volume alto de questÃµes Ã© obrigatÃ³rio para Medicina. Meta de
        <strong><%= progressoQuestoes.metaQuestoesAno %> questÃµes</strong> em <%= ano %>.
      </p>

      <div class="kst-metas-progress-block">
        <div class="kst-metas-progress-header">
          <span>Total de questÃµes</span>
          <span><%= progressoQuestoes.totalQuestoesAno %> / <%= progressoQuestoes.metaQuestoesAno %></span>
        </div>
        <div class="kst-metas-progress-bar">
          <div
            class="kst-metas-progress-fill kst-metas-progress-fill--accent"
            style="width:<%= progressoQuestoes.percQuestoesAno %>%"
          ></div>
        </div>
        <div class="kst-metas-progress-footer">
          <span><%= progressoQuestoes.percQuestoesAno %>% da meta anual</span>
        </div>
      </div>

      <ul class="kst-metas-list">
        <li>âœ… A partir de ~15.000 questÃµes vocÃª comeÃ§a a ficar muito sÃ³lido em ENEM.</li>
        <li>âœ… Ideal Ã© misturar: provas antigas + simulados + bancos de questÃµes.</li>
        <li>âœ… Sempre marcar questÃµes de erro para revisÃ£o depois.</li>
      </ul>
    </section>

    <!-- BLOCO 3: SIMULADOS -->
    <section class="kst-metas-card">
      <h2 class="kst-metas-card-title">Simulados</h2>
      <p class="kst-metas-card-desc">
        CombinaÃ§Ã£o de simulados curtos, mÃ©dios e completos para treinar ritmo, resistÃªncia e estratÃ©gia.
      </p>

      <div class="kst-metas-sim-grid">
        <div class="kst-metas-sim-item">
          <div class="top">
            <span class="label">Curtos</span>
            <span class="value"><%= progressoSimulados.qtdCurtos %> / <%= progressoSimulados.metaCurtos %></span>
          </div>
          <div class="bar">
            <div
              class="fill"
              style="width:<%= progressoSimulados.percCurtos %>%"
            ></div>
          </div>
          <span class="hint">atÃ© 60 min</span>
        </div>

        <div class="kst-metas-sim-item">
          <div class="top">
            <span class="label">MÃ©dios</span>
            <span class="value"><%= progressoSimulados.qtdMedios %> / <%= progressoSimulados.metaMedios %></span>
          </div>
          <div class="bar">
            <div
              class="fill"
              style="width:<%= progressoSimulados.percMedios %>%"
            ></div>
          </div>
          <span class="hint">2â€“3h</span>
        </div>

        <div class="kst-metas-sim-item">
          <div class="top">
            <span class="label">Completos</span>
            <span class="value"><%= progressoSimulados.qtdCompletos %> / <%= progressoSimulados.metaCompletos %></span>
          </div>
          <div class="bar">
            <div
              class="fill"
              style="width:<%= progressoSimulados.percCompletos %>%"
            ></div>
          </div>
          <span class="hint">4h+</span>
        </div>

        <div class="kst-metas-sim-item">
          <div class="top">
            <span class="label">Oficiais</span>
            <span class="value"><%= progressoSimulados.qtdOficiais %> / <%= progressoSimulados.metaOficiais %></span>
          </div>
          <div class="bar">
            <div
              class="fill"
              style="width:<%= progressoSimulados.percOficiais %>%"
            ></div>
          </div>
          <span class="hint">ENEM e provas oficiais</span>
        </div>
      </div>

      <ul class="kst-metas-list">
        <li>ğŸ¯ Use simulados curtos para treinar velocidade de questÃµes.</li>
        <li>ğŸ¯ Simulados mÃ©dios para testar estratÃ©gias de prova.</li>
        <li>ğŸ¯ Completos para simular o dia real do ENEM.</li>
      </ul>
    </section>

    <!-- BLOCO 4: REDAÃ‡Ã•ES -->
    <section class="kst-metas-card">
      <h2 class="kst-metas-card-title">RedaÃ§Ãµes</h2>
      <p class="kst-metas-card-desc">
        Meta de <strong><%= progressoRedacoes.metaRedacoesAno %> redaÃ§Ãµes</strong> em <%= ano %>
        (mÃ©dia de 1 por semana).
      </p>

      <div class="kst-metas-progress-block">
        <div class="kst-metas-progress-header">
          <span>Total de redaÃ§Ãµes</span>
          <span><%= progressoRedacoes.totalRedacoesAno %> / <%= progressoRedacoes.metaRedacoesAno %></span>
        </div>
        <div class="kst-metas-progress-bar">
          <div
            class="kst-metas-progress-fill kst-metas-progress-fill--redacao"
            style="width:<%= progressoRedacoes.percRedacoesAno %>%"
          ></div>
        </div>
        <div class="kst-metas-progress-footer">
          <span><%= progressoRedacoes.percRedacoesAno %>% da meta anual</span>
        </div>
      </div>

      <p class="kst-metas-card-desc small">
        * Estou contando redaÃ§Ãµes em qualquer estudo de matÃ©ria cujo nome contenha "RedaÃ§Ã£o".
      </p>

      <ul class="kst-metas-list">
        <li>ğŸ“ Tente intercalar temas sociais, filosÃ³ficos, saÃºde, educaÃ§Ã£o e tecnologia.</li>
        <li>ğŸ“ Sempre revisar com base nas 5 competÃªncias do ENEM.</li>
      </ul>
    </section>

    <!-- BLOCO 5: SAÃšDE & ENERGIA -->
    <section class="kst-metas-card">
      <h2 class="kst-metas-card-title">SaÃºde & energia</h2>
      <p class="kst-metas-card-desc">
        Estudar 7â€“8h por dia sÃ³ funciona se o corpo segurar. Aqui vÃ£o os indicadores de sono e energia.
      </p>

      <div class="kst-metas-health-grid">
        <div class="kst-metas-health-item">
          <span class="label">MÃ©dia de sono registrada</span>
          <span class="value">
            <% if (progressoSaude.mediaSono != null) { %>
              <%= progressoSaude.mediaSono %>h
            <% } else { %>
              â€”
            <% } %>
          </span>
          <span class="hint">
            Dias com sono lanÃ§ado: <%= progressoSaude.diasComSono %>
          </span>
        </div>

        <div class="kst-metas-health-item">
          <span class="label">Sono adequado (7â€“9h)</span>
          <span class="value"><%= progressoSaude.percSonoAdequado %>%</span>
          <span class="hint">
            <%= progressoSaude.diasSonoAdequado %> dias no alvo
          </span>
        </div>

        <div class="kst-metas-health-item">
          <span class="label">MÃ©dia de energia</span>
          <span class="value">
            <% if (progressoSaude.mediaEnergia != null) { %>
              <%= progressoSaude.mediaEnergia %>/10
            <% } else { %>
              â€”
            <% } %>
          </span>
          <span class="hint">baseado nos registros de nÃ­vel de energia</span>
        </div>
      </div>

      <ul class="kst-metas-list">
        <li>ğŸ’¤ Tenta manter 7â€“8h de sono antes dos dias mais pesados.</li>
        <li>ğŸ€ Usa treino e basquete como aliado, nÃ£o como inimigo do estudo.</li>
        <li>ğŸ’§ Quando quiser, dÃ¡ pra criar depois um campo de hidrataÃ§Ã£o para trackar tambÃ©m.</li>
      </ul>
    </section>

  </div>

</section>

</div>
</main>

<%- include("partials/footer") %>
