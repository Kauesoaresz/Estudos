<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= tituloPagina %></title>

  <link rel="stylesheet" href="/css/pages/rotina.css">
</head>

<body class="page-rotina">

  <div class="rotina-top-bar">
    <a href="/rotina" class="btn-voltar">← Voltar</a>
  </div>

  <section class="kst-rotina-form">

    <div class="form-header">
      <h1><%= isEdit ? "Editar bloco da rotina" : "Novo bloco da rotina" %></h1>
      <p>Defina um horário fixo.</p>
    </div>

    <form action="<%= formAction %>" method="POST">

      <label>Nome do bloco</label>
      <input type="text" name="title" required maxlength="80"
      value="<%= routineBlock ? routineBlock.title : '' %>">

      <label>Dia da semana</label>
      <select name="weekday" required>
        <% diasSemana.forEach(d => { %>
          <option value="<%= d.value %>"
            <%= (routineBlock && routineBlock.weekday === d.value) ||
                 (!routineBlock && selectedWeekday === d.value)
              ? "selected" : "" %>>
            <%= d.label %>
          </option>
        <% }) %>
      </select>

      <label>Horário</label>
      <div class="time-row">
        <input type="time" name="startTime" required value="<%= routineBlock ? routineBlock.startTime : '' %>">
        <span>até</span>
        <input type="time" name="endTime" required value="<%= routineBlock ? routineBlock.endTime : '' %>">
      </div>

      <label>Descrição</label>
      <textarea name="description" rows="3"><%= routineBlock?.description || "" %></textarea>

      <label>Cor</label>
      <input type="color" name="color" value="<%= routineBlock?.color || '#1C9AFF' %>">

      <div class="form-actions">
        <a href="/rotina" class="btn-secondary">Cancelar</a>
        <button class="btn-primary"><%= isEdit ? "Salvar alterações" : "Salvar bloco" %></button>
      </div>
    </form>
  </section>

</body>
</html>
